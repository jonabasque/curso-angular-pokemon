<!DOCTYPE html>
<html ng-app="pokedex">
    <head>
        <meta  charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Pokedex</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

    </head>
    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button>
                  <a class="navbar-brand" href="#">
                    <img src="img/logo.png">
                    Pokédex
                  </a>
                </div>
            </div>
        </nav>
        <div class="container">
            <!-- pokemon -->
            <div ng-controller="PokemonController as pkmCtrl">
                <div class="page-header">
                    <h1>
                        {{pkmCtrl.pokemon.name}} <small>{{pkmCtrl.pokemon.species}} </small>
                        <span class="label label-primary pull-right">#{{pkmCtrl.pokemon.id}}</span>
                    </h1>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <img class="avatar center-block" ng-src="img/pokemons/{{pkmCtrl.pokemon.name | lowercase}}.jpg">
                    </div>
                    <div class="col-md-6">
                        <ul class="nav nav-tabs nav-justified">
                            <!-- La directiva ng-click nos prove la posibilidad de ejecutar una expresión cuando se haga click en el elemento. En este caso cambiaremos el valor de la variable tab para mostrarla -->
                            <li ng-click="tab = 1" ng-class="active : tab === 2"><a href="#">Pokedex</a></li>
                            <!--Pero como tendríamos el problema de la clase active tenemos que agregarsela a cada elemento cuando se pulse el elemnto-->
                            <li ng-class="active : tab === 2" ng-click="tab = 2"><a href="#">Estadisticas</a></li>
                            <li ng-class="active : tab === 3" ng-click="tab = 3"><a href="#">Evolución</a></li>
                        </ul>
                    <!-- Con la directiva ng-init inicalizamos una variable con un valor, algo que no es muy buena prácica hacer en el HTML pero para una variable de control viene muy bien no tener que traerla desde un controlador. Angular nos provee esta funcionalidad.-->
                    <div ng-init="tab = 1" class="tab-content">

                        <!-- Usamos la directiva ng-show por si sola (sin depender de otra directiva como hacemos en las flechas de la evolución) para mostra o no el contenido del tab cuando el valor sea el suyo, que lo cambiaremos cuando se pulse ene el-->
                    <div ng-show="tab === 1"> <!--Pokedex-->
                      <ul class="list-group">
                        <li class="list-group-item">
                          <strong>Tipo: </strong>
                          <span class="pull-right">
                              <!-- La directiva ng-repeat nos repetirá el span por cada uno de los elementos del array recorrido -->
                              <span ng-repeat="type in pkmCtrl.pokemon.type" class="label type-{{type | lowercase }}"> <!-- De esta manera usaremos una clase u otra dependiendo de el tipo de pokemon-->
                                  <!--Este tipo es cada uno de los elementos del array iterado-->
                                  {{type}}
                              </span>
                          </span>
                        </li>
                        <li class="list-group-item">
                          <strong>Altura:</strong>
                          <span class="pull-right">{{pkmCtrl.pokemon.height}}</span>
                        </li>
                        <li class="list-group-item">
                          <strong>Peso: </strong>
                          <span class="pull-right">{{pkmCtrl.pokemon.weight}}</span>
                        </li>
                        <li class="list-group-item">
                            <strong>Habilidades: </strong>

                            <!-- Hacemos lo mismo que con los tipos pero está vez repetimos los li y solo tenemos que escribir uno -->
                            <ul>
                                <li ng-repeat="habilidad in pkmCtrl.pokemon.abilities">
                                <!-- De esta manera no tenemos que agregar más habilidades aquí si no en el controlador o vendrán desde una API -->
                                {{habilidad}}
                            </ul>
                        </li>
                      </ul>
                    </div>

                    <!-- Hacemos lo mismo que con el tab de caracteristicas-->
                    <div ng-show="tab === 2"> <!-- Stadisticas -->
                      <ul class="list-group">
                        <li class="list-group-item">
                          <strong>HP</strong>
                          <span class="badge">{{pkmCtrl.pokemon.stats.hp}}</span>
                        </li>
                        <li class="list-group-item">
                          <strong>Ataque</strong>
                          <span class="badge">{{pkmCtrl.pokemon.stats.attack}}</span>
                        </li>
                        <li class="list-group-item">
                          <strong>Defensa</strong>
                          <span class="badge">{{pkmCtrl.pokemon.stats.defense}}</span>
                        </li>
                        <li class="list-group-item">
                          <strong>Ataque Especial</strong>
                          <span class="badge">{{pkmCtrl.pokemon.stats['sp.atk']}}</span>
                        </li>
                        <li class="list-group-item">
                          <strong>Defensa Especial</strong>
                          <span class="badge">{{pkmCtrl.pokemon.stats['sp.def']}}</span>
                        </li>
                        <li class="list-group-item">
                          <strong>Velocidad</strong>
                          <span class="badge">{{pkmCtrl.pokemon.stats.speed}}</span>
                        </li>
                        <li class="list-group-item">
                          <strong>Total</strong>
                          <span class="badge">{{pkmCtrl.pokemon.stats.total}}</span>
                        </li>
                      </ul>
                    </div>

                    <!-- Y hacemos lo mismo que con caracteristicas y estadisticas -->
                    <div ng-show="tab === 3"> <!-- Evolution -->
                        <!--Repetimos este div tantas veces como elementos tengamos en el array evolution y así dibujamos su evolución, tal y comom hemos hecho en los stributos type y abilities de las caracteristicas del pokemon -->
                        <div class="text-center" ng-repeat="pokemon in pkmCtrl.pokemon.evolution">
                            <a href="#">
                              <img src="img/pokemons/{{pokemon | lowercase}}.jpg" width="160">
                              <p>
                                <strong>{{pokemon}}</strong>
                              </p>
                            </a>
                            <!-- como no queremos la flecha hacia abajo en el último pokemon, usamos la directiva ng-hide que nos esconderá el elemento que le indiquemos de la iteracción con ng-repeat -->
                            <span ng-hide="$last" class="glyphicon glyphicon-arrow-down"></span>
                        </div>
                    </div>
                    </div> <!--/tab-content-->
                </div><!--/row-->
            </div> <!-- /pokemon -->
        </div> <!--/container-->
        <script src="js/lib/angular.min.js"></script>
        <script src="js/app.js"></script>
    </body>
<html>
